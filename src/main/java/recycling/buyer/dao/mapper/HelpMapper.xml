<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="recycling.buyer.dao.face.HelpDao">

	<select id="selectPageAll" resultType="int">
		SELECT COUNT(*) FROM (
			SELECT * FROM Faq
			<where>
				AND faq_no = #{faqNo}
			</where>
		)
	</select>
	
<!-- 	<select id="selectAllFaq" parameterType="recycling.util.Paging" resultType="Faq"> -->
<!-- 	SELECT * FROM ( -->
<!-- 			SELECT rownum rnum, B.* FROM ( -->
<!-- 				SELECT F.*, C.ct_faqname -->
<!-- 				FROM Faq F -->
<!-- 				JOIN Faq_ct C ON F.ct_faqno = C.ct_faqno -->
<!-- 				ORDER BY F.faq_no -->
<!-- 			) B -->
<!-- 		) -->
<!-- 		<where> -->
<!-- 			AND rnum BETWEEN #{startNo } AND #{endNo } -->
<!-- 		</where> -->
<!-- 	</select> -->
	<select id="selectAllFaq" parameterType="recycling.util.Paging" resultType="Faq">
			SELECT F.*, C.ct_faqname
			FROM Faq F
			JOIN Faq_ct C ON F.ct_faqno = C.ct_faqno
			ORDER BY F.faq_no
	</select>
	
	<select id="selectAllCtFaq" parameterType="recycling.util.Paging" resultType="FaqCt">
		SELECT * FROM Faq_ct
	</select>
	
	<select id="selectByCategory" resultType="Notice" parameterType="int">
	    SELECT * FROM Notice
	    <where>
	    	AND ct_ntcno = #{ctNtcNo}
	    </where>
	</select>
	
	<select id="selectByNotice" resultType="Notice" parameterType="string">
		SELECT * FROM Notice
		<where>
	    	AND ntc_code = #{ntcCode}
		</where>
	</select>
	
	<update id="ntcHit" parameterType="string">
		UPDATE Notice
			SET ntc_hit = ntc_hit + 1
		<where>
			AND ntc_code = #{ntcCode }
		</where>
	</update>
	
	<insert id="insertOto" parameterType="Oto">
		INSERT INTO Oto (oto_code, ct_otono, b_code, oto_title, oto_content,
						oto_name, oto_email, oto_hit)
		VALUES('OTO' || lpad(oto_seq.nextval, 7, '0'), #{ctOtoNo}, #{bCode}, #{otoTitle}, #{otoContent}, #{otoName}, #{otoEmail}, #{otoHit})
	
	</insert>
	
	<select id="selectAllOto" resultType="Oto" parameterType="recycling.util.Paging">
		SELECT * FROM Oto
		
	</select>
	
	<select id="selectAllOtoCt" resultType="OtoCt">
		select * from oto_ct
	</select>
	
	<select id="selectByCtOto" resultType="Oto" parameterType="string">
		SELECT * FROM oto
		<where>
			AND ct_otono = #{ctOtoNo}
		</where>
	</select>
	
	<select id="getAllOct" resultType="OtoCt">
		SELECT * FROM Oto_Ct
		
	</select>
	
</mapper>