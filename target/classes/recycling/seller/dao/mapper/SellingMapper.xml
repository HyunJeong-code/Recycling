<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="recycling.seller.dao.face.SellingDao">

	<sql id="selectExp">
	SELECT * FROM Exp
	</sql>
	
<!-- 	<select id="selectMyExpList" resultType="Exp"> -->
<!-- 		SELECT * FROM Exp -->
<!-- 		ORDER BY exp_code -->
<!-- 	</select> -->

	<select id="selectMyExpList" parameterType="recycling.util.Paging" resultType="Exp">
		SELECT * FROM (
			SELECT rownum rnum, E.* FROM (
				<include refid="selectExp"/>
				<where>
					AND exp_name LIKE '%' || #{search } || '%'
				</where>
				ORDER BY exp_code
			) E
		)
		<where>
			AND rnum BETWEEN #{startNo} AND #{endNo}
		</where>
	</select>
	
	
	<select id="selectCntAll" parameterType="string" resultType="int">
		SELECT count(*) FROM Exp
		<where>
			AND exp_name LIKE '%' || #{key } || '%'
		</where>
		ORDER BY exp_date DESC
	</select>

</mapper>